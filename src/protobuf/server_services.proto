syntax = "proto3";
package serverservices;

// gRPC related messages
service ServerServices {
    rpc ServerConfig (ConfigInfo) returns (Info) {
    }
    rpc ReturnMatches (Cmd) returns (stream GrepLine) {
    }
    rpc CloseServer (CloseMessage) returns (Info) {
    }
}
message ConfigInfo {
    int32 log_level = 1;
    int32 VMIndex = 2;
}
message GrepLine {
    string line = 1;
}

message Cmd {
    string cmd = 1;
}

message CloseMessage {
    int32 closeType = 1;
}

message Info {
    string info = 1;
}

// Failure detector related messages

message DetectorMessage {
    string Header = 1;
    string Addr = 2;
    int32 SessNUm = 3;
    int32 TTL = 4;
}

message Member {
    string Addr = 1;
    int32 SessNum = 2;
}

message FullMembershipList {
    repeated Member List = 1;
}

message UDPMessage {
    string MessageType = 1;
    DetectorMessage Dm = 2;
    FullMembershipList Fm = 3;
}
